/* Shared subpage styles for admin dashboard */
:root {
  /* Light theme as default for admin dashboard */
  --bg: #ffffff;
  --card-bg: #ffffff;
  --text: #0f172a;
  --muted: #161618;
  --accent: #6366f1;
  --danger: #ef4444;
  /* height of any fixed bottom bar (mobile nav) so dashboard can align to it */
  --bottom-bar-height: 72px;
  /* compact typography scale for denser UIs */
  --font-size-base: 14px; /* previously ~16px in many places */
  --font-size-sm: 13px;
  --font-size-md: 14px;
  --font-size-lg: 15px;
  --font-size-xl: 18px;
}

/* Prevent horizontal overflow across the admin pages. Keep mobile nav scrollable
  while preventing the entire page from scrolling horizontally. */
html, body, .admin-layout { overflow-x: hidden; }

.dark-theme {
  --bg: #0b1220;
  --card-bg: #0f1724;
  --text: #ffffff;
  --muted: #98a6bf;
  --accent: #8b5cf6;
  --danger: #ef6b6b;
}
.subpage-container {
  background: var(--bg);
  /* overall padding: top is larger to move cards down; inline padding responds to viewport */
  padding: 1.5rem;
  padding-top: 3rem;
  padding-left: clamp(0.75rem, 4vw, 1.5rem);
  padding-right: clamp(0.75rem, 4vw, 1.5rem);
  /* responsive width: always fill available container width but cap at 1400px
     (use 100% so the element respects parent padding and avoids horizontal overflow) */
  width: 100%;
  max-width: 1400px;
  margin: 0 auto;
  box-sizing: border-box;
}

/* Ensure subpage container reserves space above the fixed bottom nav so
   cards align visually and don't get obscured. Use safe-area-inset-bottom
   for devices with notch/home indicators. */
.subpage-container {
  padding-bottom: calc(var(--bottom-bar-height) + env(safe-area-inset-bottom, 0) + 0.75rem);
}

/* Admin layout & sidebar (classic/simple design) */
.admin-layout {
  display: block;
  /* Don't force a full viewport min-height here â€” it can cause child cards
     to overlap when padding is present and the page is expected to scroll.
     Use min-height:auto so content determines height; if you need a
     minimum, consider a smaller clamp() value. */
  min-height: auto;
}

.dashboard-main {
  width: 100%;
  box-sizing: border-box;
  padding: clamp(0.5rem, 3vw, 1.5rem);
  max-width: 1400px;
  margin: 0 auto;
}

/* Constrain and center the actual content inside the fluid main column so
   right-side quick-actions or summary columns sit inside the main area. */
.dashboard-inner {
  max-width: clamp(680px, 60vw, 1080px);
  margin: 0 auto;
  box-sizing: border-box;
}

.top-toggle {
  display: none;
  position: fixed;
  top: 0.75rem;
  left: 0.75rem;
  z-index: 60;
  background: #ffffff;
  border-radius: 8px;
  padding: 0.45rem;
  border: 1px solid #e6eef8;
}

.sidebar-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.35);
  opacity: 0;
  pointer-events: none;
  transition: opacity 160ms ease;
  z-index: 45;
}
.sidebar-backdrop.visible { opacity: 1; pointer-events: auto; }

.sidebar {
  background: #ffffff;
  border-left: 1px solid #eef2f7;
  width: clamp(220px, 28vw, 320px);
  box-sizing: border-box;
  padding: clamp(0.6rem, 2.2vw, 1rem);
  transform: none;
  z-index: 50;
}

.sidebar-content { display:flex; flex-direction:column; gap:0.6rem; }
.user-profile { display:flex; flex-direction:column; align-items:center; gap:0.25rem; padding:0.5rem 0; }
.profile-pic { width:56px; height:56px; border-radius:999px; object-fit:cover; border: 1px solid rgba(255,255,255,0.04); }
.user-username { font-weight:700; color:var(--text); }
.user-role { color:var(--muted); font-size:0.92rem; }

.sidebar-nav { display:flex; flex-direction:column; gap:0.25rem; margin-top:0.6rem; }
.sidebar-section { padding: 0.25rem 0.4rem; color: #94a3b8; font-size: 0.82rem; font-weight:700; text-transform:uppercase; }
.sidebar-link { display:flex; align-items:center; gap:0.75rem; padding:0.6rem 0.75rem; border-radius:8px; color:var(--text); text-decoration:none; font-weight:600; }
.sidebar-link .icon { width:28px; height:28px; display:inline-flex; align-items:center; justify-content:center; background: transparent; border-radius:8px; font-size:1.05rem; }
.sidebar-link .label { display:inline-block; }
.sidebar-link:hover { background: rgba(139,92,246,0.06); }
.sidebar-link.active { background: rgba(139,92,246,0.1); color:var(--text); box-shadow: none; }

/* Compact collapsed left rail for very small screens: hide full sidebar and show bottom bar */
@media (max-width: 640px) {
  .sidebar { display: none; }
  .mobile-bottom-bar { display: block; }
}

/* When the layout has the open state, show the overlay sidebar even on very small screens.
   This allows the toggle button to open the sidebar as an overlay while leaving the
   bottom navigation present when closed. The sidebar is positioned and animated elsewhere. */
@media (max-width: 640px) {
  /* Overlay sidebar: cover full viewport height (top-to-bottom) so it behaves
     like a full-height panel on mobile. Round only the right edge for a softer look. */
  .admin-layout.sidebar-open .sidebar {
    display: block;
    position: fixed;
    left: 0; /* align to left edge */
    top: 0;
    bottom: 0;
    transform: none;
    width: min(320px, 92vw);
    z-index: 90;
    background: var(--card-bg);
    box-shadow: 0 12px 40px rgba(16,24,40,0.16);
    border-radius: 0 12px 12px 0; /* round right edge only */
    overflow-y: auto;
    padding: 1rem;
    height: 100vh;
  }
  .admin-layout.sidebar-open .sidebar-backdrop { opacity: 1; pointer-events: auto; }
}

/* Mobile bottom bar */
.mobile-bottom-bar { display: none; position: fixed; left: 0; right: 0; bottom: 0; background: #ffffff; border-top: 1px solid #e6eef8; z-index: 80; }
.mobile-nav { display:flex; gap: 0.25rem; overflow-x: auto; padding: 0.35rem; align-items: center; }
.mobile-nav a { display:flex; flex-direction:column; align-items:center; justify-content:center; padding: 0.45rem 0.65rem; min-width: clamp(56px, 18vw, 96px); text-decoration:none; color:var(--text); border-radius:8px; transition: background 0.12s, color 0.12s; }
.mobile-nav a .m-icon { font-size: 1.1rem; }
.mobile-nav a .m-label { font-size: 0.7rem; margin-top: 0.15rem; }
.mobile-nav a:hover { background: rgba(239,68,68,0.08); color: #b91c1c; }
.mobile-nav a:active { transform: translateY(1px); }

/* On hover make the link red (strong) on pointers */
@media (pointer: fine) {
  .mobile-nav a:hover { background: rgba(239,68,68,0.12); color: #ef4444; }
}
.sidebar-bottom { margin-top:auto; }
.logout-form-main { display:flex; }
.logout-btn-main { width:100%; padding:0.55rem 0.75rem; background: var(--danger); color:white; border:none; border-radius:8px; font-weight:700; }
.logout-btn-main:hover { filter:brightness(0.95); }

/* Theme toggle styles */
.sidebar-theme-toggle { display:flex; justify-content:flex-end; padding: 0 0.5rem 0 0; }
.theme-toggle-btn { background: transparent; border: 1px solid rgba(0,0,0,0.06); padding: 0.35rem 0.6rem; border-radius: 8px; cursor: pointer; font-size: 1rem; }
.dark-theme .theme-toggle-btn { border-color: rgba(255,255,255,0.06); }

/* Desktop two-column layout */
@media (min-width: 980px) {
  /* Sidebar is the first element in the DOM, so make left column fixed
    for the sidebar and the right column the fluid main content. */
  .admin-layout { display: grid; grid-template-columns: clamp(220px, 24vw, 300px) 1fr; gap: 1rem; align-items: start; }
  .top-toggle { display: none; }
  .sidebar { position: static; transform: none; box-shadow: none; }
  .sidebar-backdrop { display: none; }
  .dashboard-main { padding: 1.5rem; }
}

/* Mobile overlay sidebar */
@media (max-width: 979px) {
  .admin-layout { position: relative; }
  .top-toggle { display: inline-flex; }
  .sidebar {
    position: fixed;
    top: 0;
    left: 0;
    bottom: auto;
    /* hidden - we replace with a bottom bar UI on small screens */
    transform: translateX(-110%);
    z-index: 70;
    overflow-y: auto; /* allow the sidebar to scroll if content exceeds viewport */
    padding: 1rem 0.8rem;
  }
  .admin-layout.sidebar-open .sidebar { transform: translateX(0); }
  .admin-layout.sidebar-open .sidebar-backdrop { opacity:1; pointer-events:auto; }

}

/* Mobile bottom bar (replaces left sidebar on small screens) */
@media (max-width: 640px) {
  .sidebar { display: none; }
  .mobile-bottom-bar {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    height: clamp(auto, 9vw, 72px);
    background: var(--card-bg);
    border-top: 1px solid #eef2f7;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 80;
    box-shadow: 0 -6px 18px rgba(16,24,40,0.04);
    padding: 0 0.5rem;
  }
  .mobile-bottom-bar .mobile-nav { display:flex; gap:0.25rem; overflow-x:auto; padding:0 0.5rem; }
  .mobile-bottom-bar .mobile-nav a { display:inline-flex; align-items:center; gap:0.1rem; padding:0.6rem 0.9rem; border-radius:5px; text-decoration:none; color:var(--text); background:transparent; min-width: clamp(56px, 18vw, 96px); }
  .mobile-bottom-bar .mobile-nav a:hover { background: rgba(99,102,241,0.06); color:var(--text); }
  /* Make hovered/active nav item red when hovered */
  .mobile-bottom-bar .mobile-nav a:hover { color: var(--danger); }
}


/* Fix: ensure the dashboard container (including hashed build classname) gets matching constraints */
.dashboard-container,
.dashboard-container.s-8yXO12Wbi8z8 {
  /* present the dashboard as a centered white card with breathing room */
  background: var(--card-bg);
  /* reduce vertical gutters so the card is visually shorter */
  padding-top: 1.6rem;
  padding-bottom: 1.25rem;
  max-width: 1100px;
  width: 100%;
  margin: 1.25rem auto;
  box-sizing: border-box;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(16,24,40,0.05);
  border: 1px solid #eef6fb;
  /* make height content-driven but ensure the card stretches to touch any fixed bottom bar */
  height: auto;
  /* reduce visual height so dashboard card sits higher above fixed bottom nav */
  min-height: calc(100vh - var(--bottom-bar-height) - 2rem); /* subtract extra space for a larger gap */
  display: block;
}

/* Give the dashboard header more breathing room inside the card */
.dashboard-container .dashboard-overview {
  padding: 1rem;
  margin-bottom: 1.5rem;
}

/* On small screens, don't cap the container height (allow normal stacking/scroll) */
@media (max-width: 900px) {
  .dashboard-container,
  .dashboard-container.s-8yXO12Wbi8z8 {
    max-height: none;
    overflow: visible;
    margin-top: 0; /* avoid overlap on small screens */
    padding-top: 1rem;
    /* on small screens we don't force min-height so cards stack naturally */
    min-height: auto;
  }
}
/* New: responsive fluid grid wrapper for subpage content */
.subpage-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  align-items: start;
}
  .subpage-grid.two-column {
  grid-template-columns: 1fr clamp(280px, 30vw, 360px); /* main + sidebar column on wide screens */
}
.subpage-card {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 1.1rem 1.25rem;
  padding-top: 1.25rem; /* reduced top padding to lower card height */
  /* nudge cards slightly but keep compact */
  margin-top: 0.5rem;
  box-shadow: 0 8px 22px rgba(16, 24, 40, 0.06);
  border: 1px solid #eef6fb;
  /* make card fill available width but stay constrained for readable measure */
  width: 100%;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
}

/* Account Settings specific card modifier - slightly narrower and centered for profile forms */
.subpage-card.settings-card {
  max-width: 540px;
  padding: 2.4rem 1.8rem;
  padding-top: 1rem;
  border-radius: 18px;
  box-shadow: 0 18px 48px rgba(17,24,39,0.06);
}

/* Center and size single edit/manage cards used across subpages (e.g., residents edit card) */
.subpage-card .edit-card {
  background: var(--card-bg);
  border: 1px solid #eef2f7;
  padding: 1rem;
  border-radius: 12px;
  box-shadow: 0 4px 16px rgba(16,24,40,0.04);
  margin: 0.75rem auto 1rem auto;
  max-width: 720px;
  width: 100%;
  box-sizing: border-box;
}

/* Ensure inner content respects small viewport widths */
.subpage-card img, .subpage-card table, .subpage-card form {
  max-width: 100%;
}
.subpage-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  margin-bottom: 1rem;
}
.subpage-title {
  font-size: 1.6rem;
  font-weight: 800;
  color: #0f172a;
  margin: 0 0 0.35rem 0;
  letter-spacing: -0.01em;
}
.subpage-actions {
  display: flex;
  gap: 0.5rem;
}
/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.9rem;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  color: #fff;
  background: #374151;
  transition: background 0.15s ease, box-shadow 0.15s ease, transform 0.12s ease;
}
.btn:hover { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(16,24,40,0.08); }
.btn:active { transform: translateY(0); }
.btn-primary { background: linear-gradient(90deg,#6366f1,#8b5cf6); }
.btn-danger { background: #ef4444; }
.btn-ghost { background: transparent; color: #0f172a; border: 1px solid #e6eef8; }

/* Standard edit button used across admin subpages (blue, same size as delete) */
.edit-btn {
  background: #1976d2;
  color: #fff;
  border: none;
  padding: 0.35rem 1rem;
  border-radius: 6px;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.15s ease, box-shadow 0.12s ease;
  display: inline-block;
}

/* Standard delete button (red) used across admin subpages */
.delete-btn {
  background: #ef4444;
  color: #fff;
  border: none;
  padding: 0.35rem 1rem;
  border-radius: 6px;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.15s ease, box-shadow 0.12s ease;
  display: inline-block;
}
.delete-btn:hover { background: #c62828; box-shadow: 0 6px 18px rgba(16,24,40,0.06); }

/* Back button */
.back-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: transparent;
  color: #0f172a;
  border-radius: 8px;
  padding: 0.45rem 0.6rem;
  border: 1px solid transparent;
  font-weight: 600;
}
.back-btn:hover { background: #f1f5f9; }

/* Settings list (index) styles */
.settings-list-item {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 0.9rem 1rem;
  border-radius: 8px;
  text-decoration: none;
  color: var(--text);
  background: transparent;
  border-bottom: 1px solid #eef2f7;
}
.settings-list-item:hover { background: #fbfdff; }
.settings-list-item .item-arrow { color: #9ca3af; font-weight:700; }

/* smaller preview button style used in privacy link */
.btn-ghost { padding:0.5rem 0.8rem; border-radius:8px; background:transparent; border:1px solid #e6eef8; color:var(--text); text-decoration:none; display:inline-block }

/* Primary add buttons (alias for page-specific classes) */
.add-vehicle-btn, .add-guard-btn, .add-resident-btn, .add-resident-btn.small-blue, .add-resident-btn.small-blue:link {
  display: inline-block;
  text-decoration: none;
  color: #fff;
  background: linear-gradient(90deg,#10b981,#059669);
  padding: 0.6rem 1rem;
  border-radius: 10px;
  box-shadow: 0 8px 28px rgba(16,24,40,0.08);
  font-weight: 700;
  font-size: 1rem;
}
.add-vehicle-btn:hover, .add-guard-btn:hover, .add-resident-btn:hover { filter: brightness(0.95); }

/* Generic create button used across subpages */
.btn-create {
  background: linear-gradient(90deg,#3b82f6,#1e40af);
  color: #fff;
  padding: 0.7rem 1.1rem;
  border-radius: 10px;
  font-weight: 800;
  box-shadow: 0 10px 30px rgba(59,130,246,0.10);
  font-size: 1rem;
}

/* Slightly increase card inner separator lines so content breathes */
.subpage-card hr { border: none; height: 1px; background: #eef6fb; margin: 1rem 0; }

.subpage-header .btn-create { margin: 0; }
.admin-list-card .btn-create { margin-bottom: 0; }

/* Tables - consistent look across subpages */
.subpage-table, .resident-table, .admin-table, .guest-table, .vehicle-table, .guard-table, .event-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1rem;
  background: transparent;
}
.subpage-table th, .subpage-table td, .resident-table th, .resident-table td, .admin-table th, .admin-table td, .guest-table th, .guest-table td, .vehicle-table th, .vehicle-table td, .guard-table th, .guard-table td, .event-table th, .event-table td {
  padding: 0.9rem 1rem;
  border-bottom: 1px solid #eef2f7;
  text-align: left;
  vertical-align: middle;
}
.subpage-table th, .resident-table th, .admin-table th, .guest-table th, .vehicle-table th, .guard-table th, .event-table th {
  background: #fbfdff;
  font-weight: 700;
  color: #0f172a;
  font-size: 0.95rem;
}
.subpage-table tr:hover td, .resident-table tr:hover td, .admin-table tr:hover td, .guest-table tr:hover td, .vehicle-table tr:hover td, .guard-table tr:hover td, .event-table tr:hover td {
  background: #fbfbfe;
}

/* Table actions */
.table-actions { display: flex; gap: 0.5rem; align-items: center; }

/* Empty/placeholder state */
.empty-state { text-align: center; padding: 2rem; color: #6b7280; }

/* Forms */
.subpage-form label { display: block; margin-bottom: 0.5rem; font-weight: 600; color: #0f172a; }
.subpage-form input[type="text"], .subpage-form input[type="email"], .subpage-form input[type="password"], .subpage-form input[type="number"], .subpage-form select, .subpage-form textarea {
  width: 100%;
  padding: 0.6rem 0.8rem;
  border: 1px solid #cbd5e1; /* darker input border for better contrast */
  border-radius: 8px;
  background: #fbfdff;
  transition: border-color 0.12s ease, box-shadow 0.12s ease;
}

/* Boxed dropdown (select) design: remove native arrow and use a custom
   SVG caret so styling is consistent across browsers. Keep keyboard
   behaviour intact and ensure sufficient hit area. */
.subpage-form select,
select,
.subpage-card select,
.vehicle-form select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0l5 6 5-6' fill='none' stroke='%239ca3af' stroke-width='1.25' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.9rem center;
  background-size: 10px 6px;
  padding-right: 2.25rem; /* room for the caret */
  border: 1px solid #cbd5e1; /* match inputs */
  border-radius: 8px;
  background-color: #fbfdff;
  /* match the taller inputs used in subpage cards */
  padding: 0.85rem 0.9rem; /* same vertical padding as .subpage-card inputs */
  font-size: 1rem;
}

/* Prevent dropdown lists from overflowing the viewport where possible.
   Note: native dropdown rendering is browser-controlled; some browsers
   (Firefox) allow option wrapping and obey these properties, while others
   may still size the popup to the longest option. This reduces overflow
   risk by constraining widths and enabling wrapping where supported. */
.subpage-form select, .subpage-card select, select {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  white-space: nowrap; /* keep single-line in closed state */
  text-overflow: ellipsis;
  overflow: hidden;
}

/* Allow options to wrap in browsers that support it (Firefox). Also
   encourage browsers to not expand the popup wider than the select. */
option {
  white-space: normal;
  word-break: break-word;
  max-width: 100%;
}

/* Ensure subpage cards don't clip overlays coming from children */
.subpage-card { overflow: visible; }

/* Larger hit area on mobile and clearer focus state for selects */
.subpage-form select:focus, select:focus, .subpage-card select:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 4px 14px rgba(59,130,246,0.12);
}
.subpage-form input:focus, .subpage-form select:focus, .subpage-form textarea:focus { outline: none; border-color: #6366f1; box-shadow: 0 6px 18px rgba(99,102,241,0.08); }
.subpage-form .form-row { display:flex; gap:1rem; }
.subpage-form .form-row.column { flex-direction: column; }

/* Darken default outlines/borders for form controls to improve contrast */
input, textarea, select, .subpage-form input, .subpage-form select, .subpage-form textarea, .subpage-card .form-row input, .subpage-card .form-row textarea, .subpage-card .form-row select {
  border-color: #cbd5e1; /* darker neutral border */
  box-shadow: none;
}

/* Stronger focus ring for accessibility and clearer input state */
input:focus, textarea:focus, select:focus, .subpage-form input:focus, .subpage-form select:focus, .subpage-form textarea:focus {
  outline: none;
  border-color: #3b82f6; /* blue focus */
  box-shadow: 0 4px 14px rgba(59,130,246,0.12);
}

/* Centralized form spacing for stacked forms inside subpage cards */
.subpage-card .form-row {
  display: flex;
  flex-direction: column;
  gap: 0.7rem; /* increased vertical gap between label and input */
  width: 100%;
  margin-bottom: 0.85rem; /* space between rows */
}
.subpage-card .form-row label {
  font-weight: 600;
  color: #232946;
  margin-bottom: 0.15rem;
}
.subpage-card .form-row input,
.subpage-card .form-row textarea,
.subpage-card .form-row select {
  padding: 0.85rem 0.9rem;
  border-radius: 10px;
  border: 1px solid #cbd5e1;
  background: #fbfdff;
  font-size: 1rem;
  box-sizing: border-box;
}

/* Save button rules centralized so every subpage gets the same look */
.subpage-card .save-btn,
.subpage-card .btn-save {
  display: block;
  width: 100%;
  max-width: 520px;
  margin: 1rem auto 0 auto;
  padding: 0.95rem 1.25rem;
  border-radius: 12px;
  font-weight: 700;
  font-size: 1.05rem;
  background: #1976d2;
  color: #fff;
  border: none;
  cursor: pointer;
/* smaller default text sizing across admin subpages to make UI denser */
body, .subpage-container, .dashboard-container { font-size: var(--font-size-base); }
.section-title { font-size: 1.15rem; }
}
.subpage-card .save-btn:hover, .subpage-card .btn-save:hover { background: #1251a3; }

/* Responsive behavior */
@media (max-width: 900px) {
  /* Reduce container padding on small screens, but keep extra top spacing so content doesn't sit under fixed header */
  .subpage-container { padding: 1rem; padding-top: 2rem; max-width: 100%; width: 100%; box-sizing: border-box; }
  /* Ensure cards are centered and constrained on mobile */
  .subpage-card { padding: 1rem; margin-left: auto; margin-right: auto; width: 100%; max-width: 680px; box-sizing: border-box; }
  .subpage-header { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
  .subpage-title { font-size: 1.25rem; }
  .subpage-actions { width: 100%; justify-content: flex-start; }
}

/* Add a compact layout for medium-large screens where a right-side summary column is used */
@media (min-width: 980px) {
  /* Center the dashboard content and create a two-column layout with
     a fluid main column and a fixed-width right sidebar. Align card tops
     using align-items:start so cards line up neatly across rows. */
  .subpage-container { padding-left: clamp(1rem, 4vw, 3rem); padding-right: clamp(1rem, 4vw, 3rem); }
  .subpage-grid { grid-template-columns: 1fr 360px; align-items: start; gap: 1.5rem; }
  /* Keep cards full-width within the main column but constrain their
     readable measure so forms and tables don't stretch too wide. */
  .subpage-card { max-width: 920px; margin: 0; }
  /* Make sure the right sidebar column content (summaries) is constrained */
  .subpage-grid > :nth-child(2) { max-width: 360px; }
}

@media (max-width: 600px) {
  .subpage-form .form-row { flex-direction: column; }
  .subpage-table, .resident-table, .admin-table, .guest-table, .vehicle-table, .guard-table, .event-table { display: block; overflow-x: auto; white-space: nowrap; }
  .subpage-table th, .subpage-table td { display: inline-block; }
}
/* Prevent header/action overlap with the fixed dashboard hamburger on very small screens */
@media (max-width: 420px) {
  /* If the dashboard uses a fixed hamburger at the top-left, add safe padding */
  /* Keep symmetric safe padding on both sides so the card stays centered
     while still preventing overlap with a left fixed hamburger. */
  .subpage-container { padding-left: 1rem; padding-right: 1rem; box-sizing: border-box; }

  /* Ensure header items stack and actions move below title */
  .subpage-header { flex-direction: column; align-items: stretch; }
  .subpage-header > div:first-child { display:flex; align-items:center; gap:0.5rem; }

  /* Make action button full-width and right-aligned inside the card */
  .subpage-actions { width: 100%; display: flex; justify-content: flex-start; }
  .subpage-actions .btn { width: 100%; text-align: left; padding-left: 0.9rem; }
}
/* Consolidated mobile rules already present above (no-op) */

/* Settings page specific: reduce top padding and pull settings card upward slightly */
.subpage-container.settings-subpage {
  padding-top: 2rem;
}
.subpage-container.settings-subpage .subpage-card.settings-card {
  margin-top: 1rem;
  padding-top: 1rem; /* slightly reduce inner top padding for tighter layout */
}

/* ------------------------------------------------------------------
   Extracted inline styles from admin dashboard Svelte files
   These rules were moved here to avoid inline <style> blocks (CSP-safe)
   Source files: +page.svelte, +layout.svelte, vehicles/*, residents/*,
   settings/+page.svelte, guards/*, events/+page.svelte, admins/*, guests/*
   ------------------------------------------------------------------ */

/* Dashboard welcome / quick-actions / stats from +page.svelte */
.welcome-section {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 16px;
  padding: 2rem;
  margin-bottom: 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: white;
  box-shadow: 0 10px 25px rgba(102, 126, 234, 0.2);
}
.welcome-content h1 { font-size: 2.5rem; font-weight: 700; margin: 0 0 0.5rem 0; }
.welcome-content p { font-size: 1.1rem; opacity: 0.9; margin: 0; }
.date-display { text-align: right; }
.date { font-size: 1.1rem; font-weight: 500; opacity: 0.9; }
.section-title { font-size: 1.5rem; font-weight: 400; color: #1f2937; margin: 0 0 1.5rem 0; padding-left: 0; }

.quick-actions-section { margin-bottom: 3rem; }
.quick-actions-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 0.5rem; align-items: start; grid-auto-rows: 1fr; }
.quick-action-card {
  background: white;
  border-radius: 10px;
  padding: 0.55rem 0.6rem;
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 0.6rem;
  text-decoration: none;
  color: inherit;
  transition: all 0.12s ease;
  box-shadow: 0 4px 8px rgba(0,0,0,0.04);
  border: 1px solid #e9eef3;
  min-height: 56px;
}

/* Ensure grid children stretch to the full row height so cards are equal-height.
   Some component-scoped styles were still overriding the container sizing; forcing
   height:100% on direct children makes the cards fill the grid cell. Also guard
   against overflow by resetting min-width/min-height. */
.quick-actions-grid > * { min-width: 0; min-height: 20px; }
.quick-actions-grid > .quick-action-card, .quick-actions-grid > a { height: auto; display: flex; align-items: center; }
.quick-action-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
.action-icon { width: 36px; height: 36px; border-radius: 8px; display:flex; align-items:center; justify-content:center; font-size:1rem; color:white; flex-shrink:0; }
.quick-action-card { min-width: 0; }
.action-content { flex: 1; display:flex; flex-direction:column; gap:0.15rem; }
.action-title { font-size: 0.95rem; font-weight: 600; color: #1f2937; margin: 0; line-height: 1.05; }
.action-description { font-size: 0.85rem; color: #6b7280; margin: 0; }

.quick-action-card .action-description { display: none !important; }
.action-description--visible { display: block !important; }
.action-arrow {
  font-size: 1.05rem;
  color: #9ca3af;
  transition: color 0.2s;
  margin-left: 0.5rem;
  align-self: center; /* vertically center the arrow in row layout */
  display: inline-flex;
  align-items: center;
}
.quick-action-card:hover .action-arrow { color: #6366f1; }

/* Remove arrows visually from quick-action cards when compact view is desired */
.quick-action-card .action-arrow { display: none !important; }

.stats-section { margin-bottom: 3rem; }
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; }

/* Charts & activity cards */
.chart-card, .activity-card { background: #fff; border-radius: 12px; padding: 1rem; box-shadow: 0 8px 22px rgba(16,24,40,0.04); border: 1px solid rgba(16,24,40,0.03); box-sizing: border-box; overflow: hidden; }
.chart-container {
  /* responsive chart container: use aspect-ratio so charts scale to available width
     and do not overflow on small screens. Keep a sensible min-height. */
  width: 100%;
  max-width: 100%;
  position: relative;
  aspect-ratio: 16 / 9;
  height: auto;
  min-height: 160px;
}

/* Ensure canvas elements used by Chart.js scale to their container and don't exceed viewport */
.chart-card canvas,
.chart-container canvas,
.chart-card .chart-canvas,
.chart-container .chart-canvas {
  display: block;
  width: 100% !important;
  height: 100% !important;
  max-width: 100% !important;
}

/* Prevent child elements from forcing horizontal overflow */
.charts-activity-row > * { min-width: 0; }

/* Vehicles / residents / guests accordion and list helpers (extracted) */
.resident-list {
  display:flex;
  flex-direction:column;
  gap:0.75rem;
  margin-top:1rem;
  /* Keep the active guest passes list scrollable inside the card so admin
     can see many active passes without scrolling the whole page. */
  /* allow a taller list so expanded details have room; include bottom padding
     equal to the fixed bottom bar so details aren't tucked under the nav */
  max-height: calc(52vh + var(--bottom-bar-height));
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  padding-right: 0.25rem; /* give a tiny inset so the scrollbar doesn't overlap content */
  padding-bottom: calc(var(--bottom-bar-height) + env(safe-area-inset-bottom, 0));
  margin-bottom: calc(var(--bottom-bar-height) + env(safe-area-inset-bottom, 0));
}
.resident-item { border:1px solid #e6eef8; border-radius:10px; overflow:hidden; }
.resident-summary { display:flex; align-items:center; width:100%; gap:0.75rem; padding:0.75rem 1rem; background:transparent; border:none; text-align:left; cursor:pointer; }
.resident-name { flex:1; font-weight:600; }
.resident-house { color:#6b7280; font-size:0.95rem; }
.chev { color:#9ca3af; margin-left:0.5rem; }
.resident-details { padding:0.75rem 1rem; background:#fff; display:flex; flex-direction:column; gap:0.5rem; }
.detail-row { color:#374151; }
.detail-actions { margin-top:0.5rem; display:flex; gap:0.5rem; align-items:center; }

/* Back buttons used across subpages */
.back-btn { margin-bottom: 1rem; background: #eee; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; }
.back-btn:hover { background: #ddd; }

/* Forms for create/edit pages */
.vehicle-form, .resident-form { display:flex; flex-direction:column; gap:1.2rem; margin-bottom:2rem; }
.vehicle-form label, .resident-form label { display:flex; flex-direction:column; font-weight:500; }
.vehicle-form input, .resident-form input, .resident-form select, .subpage-form input { padding: 0.5rem 0.75rem; border:1px solid #cbd5e1; border-radius:8px; background:#fff; box-sizing:border-box; }
.vehicle-form { max-width: 600px; }

/* Toasts */
.toast-wrap { position: fixed; left: 50%; transform: translateX(-50%); top: 1.25rem; z-index: 9999; width: min(640px, 92vw); pointer-events: none; display:flex; flex-direction:column; gap:0.25rem; align-items:stretch; }
.toast { background: #111827; color: #fff; padding: 0.75rem 1rem; border-radius: 8px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12); font-weight:600; pointer-events: auto; }
.toast-progress { height: 4px; background: rgba(255,255,255,0.08); border-radius: 6px; overflow:hidden; }
.toast-bar { height:100%; background: linear-gradient(90deg, #60a5fa, #3b82f6); transition: width 120ms linear; }

/* Admin section cards (admins/create, guards/create, etc) */
.admin-section { max-width: 820px; margin: 2rem auto; padding: 2rem; background: #fff; border-radius: 14px; box-shadow: 0 12px 40px rgba(16,24,40,0.06); }
.form-grid { display:grid; grid-template-columns: 1fr; gap: 0.9rem; }
.text-input { padding: 0.6rem 0.8rem; border-radius: 10px; border: 1px solid #cbd5e1; background: #f8fafc; }
.profile-upload input[type="file"] { margin-top: 0.5rem; }
.avatar-preview { margin: 1rem 0; display:flex; justify-content:center; }
.avatar-preview img { width:120px; height:120px; border-radius:9999px; object-fit:cover; border: 3px solid #1976d2; box-shadow: 0 8px 24px rgba(16,24,40,0.06); }
.primary-cta { display:block; width:54%; margin: 0.5rem 0 0 0; padding: 0.9rem 1.2rem; border-radius: 12px; font-size:1.05rem; }
.btn-create { background: linear-gradient(90deg,#1976d2,#1565c0); color:#fff; border:none; font-weight:700; cursor:pointer; }

/* Guard table responsive helpers */
.guard-table { margin-top: 1rem; }
.guard-table th, .guard-table td { padding: 0.9rem 1rem; }
@media (max-width: 900px) {
  .guard-table thead { display: none; }
  .guard-table, .guard-table tbody, .guard-table tr, .guard-table td { display:block; width:100%; }
  .guard-table tr { margin-bottom: 0.75rem; border:1px solid #eef2ff; border-radius:8px; padding:0.75rem; }
  .guard-table td { padding:0.25rem 0; border:none; }
  .guard-table td::before { content: attr(data-label); display:block; font-weight:600; color:#374151; margin-bottom:0.25rem; }
}

/* Guest passes card styles */
.resident-item { background: #ffffff; border-radius: 10px; box-shadow: 0 8px 22px rgba(16,24,40,0.04); border: 1px solid rgba(16,24,40,0.04); transition: transform 0.12s ease, box-shadow 0.12s ease; max-width: 480px; }
.resident-item:hover { transform: translateY(-3px); box-shadow: 0 14px 40px rgba(16,24,40,0.06); }
.resident-summary { display: grid; grid-template-columns: 1fr auto; gap: 0.5rem; align-items: center; padding: 0.85rem 1rem; }
.extend-input { width: 5.5rem; padding: 0.4rem 0.5rem; border-radius: 6px; border: 1px solid #d1d5db; }

/* When a resident item is expanded, lift it above the fixed bottom nav so
  details and action buttons are not hidden. Add extra bottom margin equal
  to the bottom bar height + safe-area inset so the expanded content is
  fully visible and tappable. */
.resident-item.expanded { position: relative; z-index: 60;}
.resident-item.expanded .resident-details { position: relative; z-index: 61; }

@media (max-width: 700px) {
  .vehicle-form { grid-template-columns: 1fr; gap: 0.5rem 0; }
  .vehicle-form button[type="submit"] { justify-self: stretch; width: 100%; }
  .resident-item { max-width: 100%; }
  .chart-container { aspect-ratio: 4/3; min-height: 120px; }
}

/* Guard page small helpers (extracted from guards/+page.svelte) */
.guard-table { margin-top: 1rem; }
.guard-table th, .guard-table td { padding: 0.9rem 1rem; }
.guard-summary { cursor: pointer; }
.guard-details { background: #fff; border-top: 1px solid #eef2f7; }
.edit-card .edit-form label { display:block; margin-bottom:0.75rem; }
.edit-card .edit-form input { width:100%; padding:0.5rem; border-radius:6px; border:1px solid #d1d5db; }

/* PWA: Prevent the document body from scrolling so the app feels like a fullscreen
  installed app. Make the dashboard and subpage containers handle scrolling
  themselves with touch-friendly momentum. We subtract any fixed bottom bar
  height so inner scrolling doesn't go under the bottom nav. */
/* Keep the document itself locked to avoid double scrollbars, but make the
   app layout the scrollable surface. This allows the app chrome (body) to
   remain fixed while `.admin-layout` handles vertical scrolling. */
html, body {
  overflow: hidden; /* lock body scroll */
  height: 100%;
}
.admin-layout {
  /* allow the app layout to scroll and fill the viewport */
  overflow: auto;
  height: 100vh;
  -webkit-overflow-scrolling: touch;
}

/* Make the main containers scrollable instead of the page. Use max-height so
  the container doesn't exceed the viewport; allow touch momentum on iOS. */
.dashboard-container,
.subpage-container,
.dashboard-container.s-8yXO12Wbi8z8 {
  /* reduce max-height further so the container doesn't touch the fixed
     bottom bar; add bottom padding so inner content never sits flush
     against the nav area. The extra subtraction creates a visible gap. */
  /* reduce max-height to give a bigger bottom gap for the fixed bottom nav */
  max-height: calc(100vh - var(--bottom-bar-height) -2rem);
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom: calc(var(--bottom-bar-height) * 0.5 + 0.75rem);
}

/* Ensure any inner content uses the available height and doesn't force the
  outer document to grow. Reset min-height set elsewhere to avoid conflicts. */
.dashboard-container { min-height: 0; }



